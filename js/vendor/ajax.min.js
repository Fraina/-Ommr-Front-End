// https://github.com/fdaciuk/ajax
!function(e,t){"use strict";"function"==typeof define&&define.amd?define("Ajax",t):"object"==typeof exports?exports=module.exports=t():e.Ajax=t()}(this,function(){"use strict";function e(){var e={},t={};return t.methods={done:function(){},error:function(){},always:function(){}},e.get=function(e){return t.XHRConnection("GET",e,null)},e.post=function(e,n){return t.XHRConnection("POST",e,n)},e.put=function(e,n){return t.promises("PUT",e,n)},e["delete"]=function(e,n){return t.promises("DELETE",e,n)},t.XHRConnection=function(e,n,r){var o=new XMLHttpRequest;return o.open(e,n||"",!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.addEventListener("readystatechange",t.handleReadyStateChange,!1),o.send(t.convertObjectToQueryString(r)),t.promises()},t.handleReadyStateChange=function(){var e=this,n=4;if(e.readyState===n){if(t.methods.always.apply(t.methods,t.parseResponse(e)),e.status>=200&&e.status<300)return t.methods.done.apply(t.methods,t.parseResponse(e));t.methods.error.apply(t.methods,t.parseResponse(e))}},t.parseResponse=function(e){var t;try{t=JSON.parse(e.responseText)}catch(n){t=e.responseText}return[t,e]},t.promises=function(){return{done:t.generatePromise.call(this,"done"),error:t.generatePromise.call(this,"error"),always:t.generatePromise.call(this,"always")}},t.generatePromise=function(e){return function(n){return t.methods[e]=n,this}},t.convertObjectToQueryString=function(e){var n=[];return t.isObject(e)?(Object.keys(e).forEach(function(t){n.push(t+"="+e[t])}),n.join("&")):e},t.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},e}return e});
